๐ ะะฐะทะฝะฐัะตะฝะธะต ะฟัะพะตะบัะฐ

ะญัะพ Web API-ะฑะพั ะดะปั ะะะพะฝัะฐะบัะต, ะบะพัะพััะน ัะฐะฑะพัะฐะตั ัะตัะตะท Callback API.
VK ะพัะฟัะฐะฒะปัะตั ัะพะฑััะธั ะฝะฐ ะฒะฐั ัะตัะฒะตั โ ะฒะฐั API ะฟัะธะฝะธะผะฐะตั ะธั โ ะพะฑัะฐะฑะฐััะฒะฐะตั โ ะพัะฟัะฐะฒะปัะตั ะพัะฒะตั ัะตัะตะท messages.send.

๐ ะกัััะบัััะฐ ะฟัะพะตะบัะฐ
VKB_CB
โ
โโโ Controllers
โ     โโโ CallbackController.cs
โ
โโโ Services
โ     โโโ IMessageService.cs
โ     โโโ MessageService.cs
โ
โโโ VK
โ     โโโ Models
โ           โโโ VkCallbackRequest.cs
โ           โโโ VkEvent.cs
โ           โโโ VkMessage.cs
โ
โโโ appsettings.json
โโโ Program.cs
โโโ VKB_CB.http

๐ ะะฟะธัะฐะฝะธะต ัะฐะนะปะพะฒ
๐ Program.cs

ะะปะฐะฒะฝัะน ัะฐะนะป ะฟัะธะปะพะถะตะฝะธั.
ะะตะณะธัััะธััะตั ัะตัะฒะธัั, HTTP-ะบะปะธะตะฝั ะธ ะทะฐะฟััะบะฐะตั Web API.

๐ appsettings.json

ะคะฐะนะป ะบะพะฝัะธะณััะฐัะธะธ.
ะฅัะฐะฝะธั ัะพะบะตะฝ ะฑะพัะฐ ะธ ัะตะบัะตัะฝัะน ะบะปัั ะพั Callback API:

"VkSettings": {
  "Token": "ะะะจ_ะขะะะะ",
  "Confirmation": "ะกะขะะะะ_ะะะะขะะะะะะะะะฏ",
  "Secret": "ะกะะะะะข_ะะ_ะะะกะขะะะะ"
}

Controllers
๐ CallbackController.cs

ะะพะฝััะพะปะปะตั, ะบะพัะพััะน ะฟัะธะฝะธะผะฐะตั ะทะฐะฟัะพัั ะพั Callback API.
ะะฑัะฐะฑะฐััะฒะฐะตั confirm, message_new ะธ ะพัะฟัะฐะฒะปัะตั ะธั ะฒ MessageService.

Services
๐ IMessageService.cs

ะะฝัะตััะตะนั ะดะปั MessageService.

๐ MessageService.cs

ะะปะฐะฒะฝะฐั ะปะพะณะธะบะฐ ะฑะพัะฐ.
ะะฑัะฐะฑะฐััะฒะฐะตั ัะตะบัั ัะพะพะฑัะตะฝะธั, ัะพัะผะธััะตั ะพัะฒะตั, ะบะปะฐะฒะธะฐัััั ะธ ะฒัะทัะฒะฐะตั messages.send.

VK / Models
๐ VkCallbackRequest.cs

ะัะฝะพะฒะฝะฐั ะผะพะดะตะปั ะฒัะพะดััะตะณะพ Callback API JSON.

๐ VkEvent.cs

ะะพะดะตะปั ะพะฑัะตะบัะฐ object.message.

๐ VkMessage.cs

ะะพะดะตะปั ัะตะบััะฐ ัะพะพะฑัะตะฝะธั ะธ ะพัะฟัะฐะฒะธัะตะปั.
